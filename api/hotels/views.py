import json
from django.http import JsonResponse
from django.views.decorators.http import require_http_methods

@require_http_methods(["GET"])
def hotels(request):
    # Load the JSON data from the database (simulated here with a string)
    json_data = "{\"searchId\": 1613062390568440000, \"properties\": [{\"propertyId\": 285764, \"propertyName\": \"Rizzan Sea-Park Hotel Tancha Bay\", \"translatedPropertyName\": \"Rizzan Sea-Park Hotel Tancha Bay\", \"propertyUtcOffset\": \"+09:00\", \"rooms\": [{\"roomId\": 5093202, \"blockId\": \"MTNlYzI5ZmEtZTNlOC01ZDYyLTc4YjEtYzBkMjc2NWExZDczOjMwMzg=\", \"roomName\": \"Deluxe Green View Room A - Non-Smoking\", \"parentRoomName\": \"Deluxe Green View Room A - Non-Smoking\", \"translatedRoomName\": \"Deluxe Green View Room A - Non-Smoking\", \"blockIdBackup\": \"13ec29fa-e3e8-5d62-78b1-c0d2765a1d73\", \"parentRoomId\": 3059385, \"ratePlanId\": 0, \"freeWifi\": true, \"remainingRooms\": 10, \"normalBedding\": 4, \"extraBeds\": 0, \"freeBreakfast\": true, \"freeCancellation\": true, \"totalPayment\": {\"exclusive\": 836.85, \"inclusive\": 1015.35, \"tax\": 178.5, \"fees\": 0.0, \"taxDueSupplier\": 0, \"estimatedCommission\": 0.0}, \"roomTypeNotGuaranteed\": false, \"paymentModel\": \"MerchantCommission\", \"rate\": {\"currency\": \"USD\", \"exclusive\": 167.37, \"inclusive\": 203.07, \"tax\": 35.7, \"fees\": 0.0, \"method\": \"PRPN\"}, \"perRoomPerNightRate\": {\"currency\": \"USD\", \"exclusive\": 167.37, \"inclusive\": 203.07, \"tax\": 35.7, \"fees\": 0.0}, \"dailyRate\": [{\"date\": \"2024-11-23\", \"exclusive\": 167.37, \"inclusive\": 203.07, \"tax\": 35.7, \"fees\": 0.0, \"method\": \"PN\"}, {\"date\": \"2024-11-24\", \"exclusive\": 167.37, \"inclusive\": 203.07, \"tax\": 35.7, \"fees\": 0.0, \"method\": \"PN\"}, {\"date\": \"2024-11-25\", \"exclusive\": 167.37, \"inclusive\": 203.07, \"tax\": 35.7, \"fees\": 0.0, \"method\": \"PN\"}, {\"date\": \"2024-11-26\", \"exclusive\": 167.37, \"inclusive\": 203.07, \"tax\": 35.7, \"fees\": 0.0, \"method\": \"PN\"}, {\"date\": \"2024-11-27\", \"exclusive\": 167.37, \"inclusive\": 203.07, \"tax\": 35.7, \"fees\": 0.0, \"method\": \"PN\"}], \"surcharges\": [], \"taxBreakdown\": [{\"id\": \"85\", \"typeValue\": \"Tax\", \"taxDescription\": \"Service Charge\", \"translatedTaxDescription\": \"Service Charge\", \"method\": \"PRPN\", \"currency\": \"USD\", \"base\": \"N\", \"taxable\": \"N\", \"percent\": 0.0, \"amount\": 18.7}, {\"id\": \"86\", \"typeValue\": \"Tax\", \"taxDescription\": \"VAT\", \"translatedTaxDescription\": \"VAT\", \"method\": \"PRPN\", \"currency\": \"USD\", \"base\": \"N\", \"taxable\": \"N\", \"percent\": 0.0, \"amount\": 17.0}, {\"id\": \"2\", \"typeValue\": \"Fee\", \"taxDescription\": \"Fee\", \"translatedTaxDescription\": \"Fee\", \"method\": \"PB\", \"currency\": \"USD\", \"base\": \"N\", \"taxable\": \"N\", \"percent\": 0, \"amount\": 0}], \"cancellationPolicy\": {\"code\": \"7D100P_100P\", \"cancellationText\": \"Risk-free booking! Cancel before 2024-11-16 and you'll pay nothing! Any cancellation received within 7 days prior to the arrival date will be charged for the entire stay. Failure to arrive at your hotel or property will be treated as a No-Show and will incur a charge of 100% of the booking value (Hotel policy).\", \"translatedCancellationText\": \"Risk-free booking! Cancel before 2024-11-16 and you'll pay nothing! Any cancellation received within 7 days prior to the arrival date will be charged for the entire stay. Failure to arrive at your hotel or property will be treated as a No-Show and will incur a charge of 100% of the booking value (Hotel policy).\", \"parameter\": [{\"days\": 8, \"charge\": \"P\", \"value\": 0}, {\"days\": 7, \"charge\": \"P\", \"value\": 100}, {\"days\": 0, \"charge\": \"P\", \"value\": 100}], \"date\": [{\"before\": \"2024-11-16T00:00:00\", \"rate\": {\"exclusive\": 0.0, \"inclusive\": 0.0, \"tax\": 0.0, \"fees\": 0.0}}, {\"before\": \"2024-11-23T00:00:00\", \"rate\": {\"exclusive\": 836.85, \"inclusive\": 1015.35, \"tax\": 178.5, \"fees\": 0.0}}, {\"onward\": \"2024-11-23T00:00:00\", \"rate\": {\"exclusive\": 836.85, \"inclusive\": 1015.35, \"tax\": 178.5, \"fees\": 0.0}}]}, \"benefits\": [{\"id\": 1, \"benefitName\": \"Breakfast\", \"translatedBenefitName\": \"Breakfast\"}, {\"id\": 95, \"benefitName\": \"Free WiFi\", \"translatedBenefitName\": \"Free WiFi\"}]}]}]}"
    
    # Parse the JSON data
    data = json.loads(json_data)
    
    # Return the parsed data as a JSON response
    return JsonResponse(data)

@require_http_methods(["GET"])
def hotel(request, property_id):
    # Load the JSON data from the database (simulated here with a string)
    json_data = "{\"searchId\": 1613062390568440000, \"properties\": [{\"propertyId\": 285764, \"propertyName\": \"Rizzan Sea-Park Hotel Tancha Bay\", \"translatedPropertyName\": \"Rizzan Sea-Park Hotel Tancha Bay\", \"propertyUtcOffset\": \"+09:00\", \"rooms\": [{\"roomId\": 5093202, \"blockId\": \"MTNlYzI5ZmEtZTNlOC01ZDYyLTc4YjEtYzBkMjc2NWExZDczOjMwMzg=\", \"roomName\": \"Deluxe Green View Room A - Non-Smoking\", \"parentRoomName\": \"Deluxe Green View Room A - Non-Smoking\", \"translatedRoomName\": \"Deluxe Green View Room A - Non-Smoking\", \"blockIdBackup\": \"13ec29fa-e3e8-5d62-78b1-c0d2765a1d73\", \"parentRoomId\": 3059385, \"ratePlanId\": 0, \"freeWifi\": true, \"remainingRooms\": 10, \"normalBedding\": 4, \"extraBeds\": 0, \"freeBreakfast\": true, \"freeCancellation\": true, \"totalPayment\": {\"exclusive\": 836.85, \"inclusive\": 1015.35, \"tax\": 178.5, \"fees\": 0.0, \"taxDueSupplier\": 0, \"estimatedCommission\": 0.0}, \"roomTypeNotGuaranteed\": false, \"paymentModel\": \"MerchantCommission\", \"rate\": {\"currency\": \"USD\", \"exclusive\": 167.37, \"inclusive\": 203.07, \"tax\": 35.7, \"fees\": 0.0, \"method\": \"PRPN\"}, \"perRoomPerNightRate\": {\"currency\": \"USD\", \"exclusive\": 167.37, \"inclusive\": 203.07, \"tax\": 35.7, \"fees\": 0.0}, \"dailyRate\": [{\"date\": \"2024-11-23\", \"exclusive\": 167.37, \"inclusive\": 203.07, \"tax\": 35.7, \"fees\": 0.0, \"method\": \"PN\"}, {\"date\": \"2024-11-24\", \"exclusive\": 167.37, \"inclusive\": 203.07, \"tax\": 35.7, \"fees\": 0.0, \"method\": \"PN\"}, {\"date\": \"2024-11-25\", \"exclusive\": 167.37, \"inclusive\": 203.07, \"tax\": 35.7, \"fees\": 0.0, \"method\": \"PN\"}, {\"date\": \"2024-11-26\", \"exclusive\": 167.37, \"inclusive\": 203.07, \"tax\": 35.7, \"fees\": 0.0, \"method\": \"PN\"}, {\"date\": \"2024-11-27\", \"exclusive\": 167.37, \"inclusive\": 203.07, \"tax\": 35.7, \"fees\": 0.0, \"method\": \"PN\"}], \"surcharges\": [], \"taxBreakdown\": [{\"id\": \"85\", \"typeValue\": \"Tax\", \"taxDescription\": \"Service Charge\", \"translatedTaxDescription\": \"Service Charge\", \"method\": \"PRPN\", \"currency\": \"USD\", \"base\": \"N\", \"taxable\": \"N\", \"percent\": 0.0, \"amount\": 18.7}, {\"id\": \"86\", \"typeValue\": \"Tax\", \"taxDescription\": \"VAT\", \"translatedTaxDescription\": \"VAT\", \"method\": \"PRPN\", \"currency\": \"USD\", \"base\": \"N\", \"taxable\": \"N\", \"percent\": 0.0, \"amount\": 17.0}, {\"id\": \"2\", \"typeValue\": \"Fee\", \"taxDescription\": \"Fee\", \"translatedTaxDescription\": \"Fee\", \"method\": \"PB\", \"currency\": \"USD\", \"base\": \"N\", \"taxable\": \"N\", \"percent\": 0, \"amount\": 0}], \"cancellationPolicy\": {\"code\": \"7D100P_100P\", \"cancellationText\": \"Risk-free booking! Cancel before 2024-11-16 and you'll pay nothing! Any cancellation received within 7 days prior to the arrival date will be charged for the entire stay. Failure to arrive at your hotel or property will be treated as a No-Show and will incur a charge of 100% of the booking value (Hotel policy).\", \"translatedCancellationText\": \"Risk-free booking! Cancel before 2024-11-16 and you'll pay nothing! Any cancellation received within 7 days prior to the arrival date will be charged for the entire stay. Failure to arrive at your hotel or property will be treated as a No-Show and will incur a charge of 100% of the booking value (Hotel policy).\", \"parameter\": [{\"days\": 8, \"charge\": \"P\", \"value\": 0}, {\"days\": 7, \"charge\": \"P\", \"value\": 100}, {\"days\": 0, \"charge\": \"P\", \"value\": 100}], \"date\": [{\"before\": \"2024-11-16T00:00:00\", \"rate\": {\"exclusive\": 0.0, \"inclusive\": 0.0, \"tax\": 0.0, \"fees\": 0.0}}, {\"before\": \"2024-11-23T00:00:00\", \"rate\": {\"exclusive\": 836.85, \"inclusive\": 1015.35, \"tax\": 178.5, \"fees\": 0.0}}, {\"onward\": \"2024-11-23T00:00:00\", \"rate\": {\"exclusive\": 836.85, \"inclusive\": 1015.35, \"tax\": 178.5, \"fees\": 0.0}}]}, \"benefits\": [{\"id\": 1, \"benefitName\": \"Breakfast\", \"translatedBenefitName\": \"Breakfast\"}, {\"id\": 95, \"benefitName\": \"Free WiFi\", \"translatedBenefitName\": \"Free WiFi\"}]}]}]}"
    
    # Parse the JSON data
    data = json.loads(json_data)
    
    # Find the property with the given property_id
    property_data = next((prop for prop in data["properties"] if prop["propertyId"] == int(property_id)), None)
    
    if property_data:
        return JsonResponse(property_data)
    else:
        return JsonResponse({"error": "Property not found"}, status=404)